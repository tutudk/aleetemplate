void 0===window.Shopify&&(window.Shopify={}),"object"==typeof Countries&&(Countries.updateProvinceLabel=function(e,t){if("string"==typeof e&&Countries[e]&&Countries[e].provinces){if("object"!=typeof t&&null===(t=document.getElementById("address_province_label")))return;t.innerHTML=Countries[e].label;var r=jQuery(t).parent();r.find("select"),r.find(".custom-style-select-box-inner").html(Countries[e].provinces[0])}}),void 0===Shopify.Cart&&(Shopify.Cart={}),Shopify.Cart.ShippingCalculator=function(){var _config={submitButton:vela.settings.shippingCalcSubmitButton,submitButtonDisabled:vela.settings.shippingCalcSubmitButtonDisabled,templateId:"shipping-calculator-response-template",wrapperId:"wrapper-response",customerIsLoggedIn:!1,moneyFormat:"${{amount}}",CalculateMessSuccess:vela.settings.shippingCalcMessSuccess,CalculateMessSuccess1:vela.settings.shippingCalcMessSuccess1,CalculateMessError:vela.settings.shippingCalcMessError},_render=function(e){var t="",r="",a="";""!=e.rates?(r+="alert-success",a=a+_config.CalculateMessSuccess+" "+e.address):(r+="alert-warning",a+=_config.CalculateMessSuccess1),e.success?(t+='<div class="shipping_calculate_mess alert '+r+' py-2"><div>'+a+".</div>",e.rates&&(t+='<ul class="mb-0">',e.rates.forEach((function(e){t+='<li class="shipping_calculate_rate">'+e.presentment_name+": "+e.price+"</li>"})),t+="</ul></div")):t+='<div class="shipping_calculate_rate alert alert-danger py-2">'+e.errorFeedback+"</div>",jQuery("#"+_config.wrapperId).html(t)},_enableButtons=function(){jQuery(".get-rates").removeAttr("disabled").removeClass("disabled").val(_config.submitButton)},_disableButtons=function(){jQuery(".get-rates").val(_config.submitButtonDisabled).attr("disabled","disabled").addClass("disabled")},_getCartShippingRatesForDestination=function(e){var t={type:"POST",url:"/cart/prepare_shipping_rates",data:jQuery.param({shipping_address:e}),success:_pollForCartShippingRatesForDestination(e),error:_onError};jQuery.ajax(t)},_pollForCartShippingRatesForDestination=function(e){var t=function(){jQuery.ajax("/cart/async_shipping_rates",{dataType:"json",success:function(r,a,s){200===s.status?_onCartShippingRatesUpdate(r.shipping_rates,e):setTimeout(t,500)},error:_onError})};return t},_fullMessagesFromErrors=function(e){var t=[];return jQuery.each(e,(function(e,r){jQuery.each(r,(function(e,r){t.push(r)}))})),t},_onError=function(XMLHttpRequest,textStatus){jQuery("#estimated-shipping").hide(),jQuery("#estimated-shipping em").empty(),_enableButtons();var feedback="",data=eval("("+XMLHttpRequest.responseText+")");feedback=data.message?data.message+"("+data.status+"): "+data.description:""+_fullMessagesFromErrors(data).join("; "),_render({rates:[],errorFeedback:feedback,success:!1}),jQuery("#"+_config.wrapperId).show()},_onCartShippingRatesUpdate=function(e,t){_enableButtons();var r="";if(t.zip&&(r+=t.zip+", "),t.province&&(r+=t.province+", "),r+=t.country,e.length){"0.00"==e[0].price?jQuery("#estimated-shipping em").html("FREE"):jQuery("#estimated-shipping em").html(_formatRate(e[0].price));for(var a=0;a<e.length;a++)e[a].price=_formatRate(e[a].price)}_render({rates:e,address:r,success:!0}),jQuery("#"+_config.wrapperId+", #estimated-shipping").fadeIn()},_formatRate=function(e){function t(e,t){return void 0===e?t:e}function r(e,r,a,s){if(r=t(r,2),a=t(a,","),s=t(s,"."),isNaN(e)||null==e)return 0;var n=(e=(e/100).toFixed(r)).split(".");return n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a)+(n[1]?s+n[1]:"")}if("function"==typeof Shopify.formatMoney)return Shopify.formatMoney(e,_config.moneyFormat);"string"==typeof e&&(e=e.replace(".",""));var a="",s=/\{\{\s*(\w+)\s*\}\}/,n=_config.moneyFormat;switch(n.match(s)[1]){case"amount":a=r(e,2);break;case"amount_no_decimals":a=r(e,0);break;case"amount_with_comma_separator":a=r(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":a=r(e,0,".",",")}return n.replace(s,a)};return _init=function(){new Shopify.CountryProvinceSelector("address_country","address_province",{hideElement:"address_province_container"});var e=jQuery("#address_country"),t=jQuery("#address_province_label").get(0);"undefined"!=typeof Countries&&(Countries.updateProvinceLabel(e.val(),t),e.change((function(){Countries.updateProvinceLabel(e.val(),t)}))),jQuery(".get-rates").click((function(){_disableButtons(),jQuery("#"+_config.wrapperId).empty().hide();var e={};e.zip=jQuery("#address_zip").val()||"",e.country=jQuery("#address_country").val()||"",e.province=jQuery("#address_province").val()||"",_getCartShippingRatesForDestination(e)})),_config.customerIsLoggedIn&&jQuery(".get-rates:eq(0)").trigger("click")},{show:function(e){e=e||{},jQuery.extend(_config,e),jQuery((function(){_init()}))},getConfig:function(){return _config},formatRate:function(e){return _formatRate(e)}}}();